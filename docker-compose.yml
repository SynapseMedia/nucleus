version: '3.9'

x-multimedia-volume:
  &multimedia-volume
  type: bind
  source: "${RUNTIME_DIRECTORY}"
  target: /multimedia

services:
  ipfs:
    image: ipfs/go-ipfs:v0.10.0
    hostname: ipfs
    restart: unless-stopped
    networks:
      - watchit
    env_file:
      - .env
    volumes:
      - *multimedia-volume
      - "${IPFS_DATA}:/ipfsdata"
    ports:
      - "0.0.0.0:8080:8080/tcp"
      - "0.0.0.0:4001:4001/tcp"
      - "0.0.0.0:4001:4001/udp"
      - "127.0.0.1:5001:5001"
